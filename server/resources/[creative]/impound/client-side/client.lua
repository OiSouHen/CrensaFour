-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module("vrp","lib/Tunnel")
local Proxy = module("vrp","lib/Proxy")
vRP = Proxy.getInterface("vRP")
-----------------------------------------------------------------------------------------------------------------------------------------
-- CONNECTION
-----------------------------------------------------------------------------------------------------------------------------------------
cRP = {}
Tunnel.bindInterface("impound",cRP)
vSERVER = Tunnel.getInterface("impound")
-----------------------------------------------------------------------------------------------------------------------------------------
-- VARI√ÅVEIS
-----------------------------------------------------------------------------------------------------------------------------------------
local timeSeconds = 0
-----------------------------------------------------------------------------------------------------------------------------------------
-- SERVICES
-----------------------------------------------------------------------------------------------------------------------------------------
local services = {
	{ -142.24,-1174.19,23.76 },
	{ 1724.84,3715.31,34.22 },
	{ -305.45,6117.62,31.49 }
}
-----------------------------------------------------------------------------------------------------------------------------------------
-- IMPOUND:CHECK
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNetEvent("impound:Check")
AddEventHandler("impound:Check",function()
	local ped = PlayerPedId()
	if not IsPedInAnyVehicle(ped) then
		local coords = GetEntityCoords(ped)
		for k,v in pairs(services) do
			local distance = #(coords - vector3(v[1],v[2],v[3]))
			if distance <= 30 then
				if timeSeconds <= 0 and distance <= 5 then
					timeSeconds = 2
					vSERVER.checkImpound()
				end
			end
		end
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- TIMESECONDS
-----------------------------------------------------------------------------------------------------------------------------------------
Citizen.CreateThread(function()
	while true do
		if timeSeconds > 0 then
			timeSeconds = timeSeconds - 1
		end

		Citizen.Wait(1000)
	end
end)